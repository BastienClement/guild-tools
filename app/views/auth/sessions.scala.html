@import models.authentication.Session
@(sessions: Seq[Session])(implicit req: AuthController#AuthRequest[AnyContent])
@auth.layout("Connexions actives", "sessions") {

	<div style="display: flex; margin-bottom: 20px;">
		<div class="box black">
			<p>
				Cette page liste toutes les sessions actuellement actives sur votre compte.
				Vous pouvez choisir de terminer manuellement une session si vous estimez qu'elle ne devrait plus être ouverte.
				Les sessions sans activité depuis 5 jours sont automatiquement fermées.
			</p>
		</div>
		<a href='@req.url("/account/sessions?close=all")' class="block"
			style="margin: 0 0 0 8px; font-size: inherit; white-space: nowrap; line-height: 41px;">
			<i class="material-icons" style="margin-top: 0;">cloud_off</i>
			Terminer toutes les connexions
		</a>
	</div>

	<table class="box">
		<thead>
			<tr>
				<th>Adresse IP</th>
				<th>User-Agent</th>
				<th>Ouverte</th>
				<th>Dernière activité</th>
				<th class="ac">Actions</th>
			</tr>
		</thead>
		<tbody>
			@for(session <- sessions) {
				<tr class="row">
					<td class="ip">@session.ip.getOrElse("-")</td>
					<td class="ua">@session.ua.getOrElse("-")</td>
					<td class="cr">@session.created.toISOString</td>
					<td class="la">@session.last_access.toISOString</td>
					<td class="ac">
						@if(req.sessid != session.token) {
							<a href='@req.url("/account/sessions?close=" + session.token)' class="btn">
								Terminer
							</a>
						} else {
							<em>Connexion active</em>
						}
					</td>
				</tr>
			}
		</tbody>
	</table>

	<style>
		table {
			border-collapse: collapse;
		}

		thead {
			background: rgba(100, 180, 255, 0.1);
			font-size: 15px;
		}

		th, td {
			text-align: left;
			padding: 12px;
		}

		th {
			font-weight: 500;
		}

		td {
			/*vertical-align: top;*/
			white-space: nowrap;
		}

		.row td {
			border-top: 1px solid #426585;
		}

		.ua {
			font: 400 12px "Roboto";
			width: 40%;
			white-space: normal;
		}

		.ac {
			text-align: right;
			width: 100px;
		}
	</style>
}
