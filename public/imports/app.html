<dom-module id="gt-app">
	<style type="text/less">
		:host {
			.cover;
			z-index: 500;
			min-width: 1200px;
		}

		#title {
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			height: 56px;
			
			&[is_app] {
				top: 1px;
				left: 1px;
				right: 1px;
			}
		}

		#side {
			position: absolute;
			top: 56px;
			left: 0;
			bottom: 0;
			width: 56px;
			
			&[is_app] {
				top: 57px;
				left: 1px;
				bottom: 1px;
			}
		}

		#view {
			position: absolute;
			top: 56px;
			left: 56px + 12px;
			right: 0;
			bottom: 0;
			
			&[is_app] {
				top: 57px;
				left: 56px + 12px + 1px;
				right: 1px;
				bottom: 1px;
			}
		}
	</style>
	<template>
		<gt-title-bar #title {is_app}></gt-title-bar>
		<gt-sidebar #side {is_app}></gt-sidebar>
		<gt-view #view (scroll)="ViewScroll" {is_app}></gt-view>
	</template>
</dom-module>

<dom-module id="gt-title-bar">
	<style type="text/less">
		@titlebar-height: 64px;

		:host {
			padding: 12px;
			box-sizing: border-box;
			animation: slide 0.5s ease-out;
			animation-fill-mode: both;

			background: fade(@fs-blue, 15%);
			box-shadow: 0px 1px 2px rgba(17, 17, 17, 0.15);

			display: flex;
			align-items: center;
			
			-webkit-app-region: drag;
		}
		
		:host > * {
			-webkit-app-region: no-drag;
		}

		#logo {
			height: 56px;
			width: 56px;

			padding: 12px;
			margin: -12px 4px -12px -12px;

			background-color: fade(@fs-blue, 15%);
			transition: background .25s ease-out;

			&:hover {
				background-color: fade(@fs-blue, 25%);
			}
		}

		#tabs {
			flex: 1;
			-webkit-app-region: drag;
			
			& >* {
				-webkit-app-region: no-drag;
			}
		}

		gt-button {
			transition: opacity .25s ease-out, color .25s ease-out;
			height: 56px;

			opacity: 0.75;
			color: mix(@light-blue, white, 50%);

			&:hover, &[active] {
				opacity: 1;
				color: white;
			}
		}

		#chat {
			font-size: 15px;

			& > div {
				display: inline-block;
			}
		}

		i {
			font-size: 20px;
		}

		#status, #online {
			margin-right: 8px;
		}

		#latency {
			margin-right: 4px;
		}

		#window-controls {
			margin-left: 16px;
			margin-right: 5px;

			i {
				margin-left: 8px;
				transition: text-shadow .3s ease-out;
				
				&:hover {
					text-shadow: 0px 0px 5px rgba(255, 255, 255, 0.8);
				}
			}
		}

		@keyframes slide {
			0% { transform: translateY(-5px); opacity: 0; }
			100% { transform: translateY(0); opacity: 1; }
		}
	</style>
	<template>
		<img #logo src="/assets/images/logo_small2.png">
		<div #tabs>
			<gt-button [repeat]="tabs" collapse-left {active}="tabActive(item, path)" {hidden}="!tabVisible(item)" (click)="activateTab">{{item.title}}</gt-button>
		</div>
		<div #chat>
			<div #status>
				<b>Blash</b>
				<i>arrow_drop_down</i>
			</div>
			<div #online>
				<i>person_outline</i>
				<b>{{online_users}}</b>
			</div>
			<div #latency>
				<i>settings_ethernet</i>
				<b>{{latency}}</b>
			</div>
		<div>
		<div #window-controls>
			<i #window-minimize>remove</i>
			<i #window-close>close</i>
		</div>
	</template>
</dom-module>

<dom-module id="gt-sidebar">
	<style type="text/less">
		:host {
			padding-top: 12px;
			animation: sidebar-appear 0.3s ease-out;
			animation-delay: 0.5s;
			animation-fill-mode: both;
			box-shadow: 0px 1px 2px rgba(17, 17, 17, 0.15);
		}
		
		@keyframes sidebar-appear {
			0% { background: fade(@fs-blue, 0%); }
			100% { background: fade(@fs-blue, 8%); }
		}
		
		.generate-icn-delay(@nth) when (@nth < 20) {
			.icon:nth-child(@{nth}) { animation-delay: unit((@nth - 1) * 0.1, s); }
			.generate-icn-delay(@nth + 1);
		}

		.generate-icn-delay(1);

		.icon {
			font-size: 32px;
			padding: 4px 6px;
			color: @fs-blue;
			position: relative;
			cursor: default;

			animation: slide-in 0.4s ease-out;
			animation-fill-mode: both;
			
			i {
				padding: 5px 5px;
				display: inline-block;
				box-sizing: content-box;
				border: 1px solid transparent;
				transition: all 0.2s ease-out;
			}

			&:hover i {
				background: fade(@fs-blue, 8%);
				border-color: fade(@fs-blue, 10%);
			}

			&[active] i {
				background: fade(@fs-blue, 15%);
				border-color: fade(@fs-blue, 20%);
			}
		}

		@keyframes slide-in {
			0% { transform: translateX(-10px); opacity: 0; }
			100% { transform: translateX(0px); opacity: 1; }
		}
	</style>
	<template>
		<div .icon [repeat]="icons" (click)="IconClicked" {active}="equals(item.key, module)"><i>{{item.icon}}</i></div>
	</template>
</dom-module>

<dom-module id="gt-view">
	<style type="text/less">
		:host {
			overflow-y: auto;
			overflow-x: hidden;
		}

		#wrapper {
			.pos(absolute, 12px, 12px, 12px, 0);
		}

		#wrapper ::content > * {
			position: absolute;
			top: 0px;
			right: 0px;
			bottom: 0px;
			left: 0px;
			
			margin: auto;

			opacity: 0;
			transition: opacity 0.3s ease-in;

			&.active {
				opacity: 1;
			}
		}
	</style>
	<template>
		<div #wrapper>
			<content></content>
		</div>
	</template>
</dom-module>
