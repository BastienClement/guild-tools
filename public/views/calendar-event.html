<style>
	#calendar-event-wrapper {
		display: flex;
		flex: 1;
		max-width: 1300px;
	}

	#calendar-event h2 {
		flex-shrink: 0;
	}
	
	#calendar-event-left {
		display: flex;
		flex-direction: column;
		margin-right: 6px;
	}
	
	#calendar-event-infos button {
		float: right; 
		z-index: 50;
	}
	
	#calendar-event-infos h3 {
		z-index: 40;
	}
	
	#calendar-event .chars {
		border-top: 2px solid #426585;
		padding: 15px 15px 0 15px;
		margin: 0px -15px;
		overflow: auto;
		flex: 1;
	}
	
	#calendar-event .row {
		display: flex;
	}
	
	#calendar-event .char-wrapper {
		flex: 1;
	}
	
	#calendar-event .char-wrapper + .char-wrapper {
		margin-left: 15px;
	}

	#calendar-event .char {
		background: rgba(0, 0, 0, 0.2);
		border: 1px solid rgba(0, 0, 0, 0.1);
		padding: 0px 5px 1px 5px;
		margin-bottom: 5px;
		display: flex;
	}
	
	#calendar-event .char img {
		width: 11px;
		height: 11px;
		top: 4px;
	}
	
	#calendar-event .char .name {
		flex: 1;
		padding: 0px 5px;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
	}
	
	#calendar-event .char i {
		color: #426585;
	}
	
	#calendar-event-answers {
		width: 310px;
		padding-bottom: 0px;
		flex: 1;
		display: flex;
		flex-direction: column;
		margin-top: 6px;
	}
	
	#calendar-event-answers .tabs, #calendar-event-answers h3 {
		flex-shrink: 0;
	}
	
	#calendar-event-answers .tabs button {
		margin-top: 5px;
		margin-bottom: -2px;
		border: 2px solid transparent;
		border-bottom: 0;
		padding: 5px 12px 5px 8px;
		transition: border ease .3s, color ease .3s, background ease .3s;
		z-index: 3;
	}
	
	#calendar-event-answers button + button {
		margin-left: 5px;
	}
	
	#calendar-event-answers button.active {
		background-color: #334453;
	}
	
	#calendar-event-answers button.active, #calendar-event-answers button:hover {
		border-color: #426585;
	}
	
	#calendar-event-registering {
		margin-top: 6px;
	}
	
	#calendar-event-registering .opts {
		float: left;
		margin-top: 5px;
		margin-bottom: 0;
	}
	
	#calendar-event-registering .opts + .opts {
		margin-left: 15px;
	}
	
	#calendar-event-registering textarea {
		width: 100%;
	}
	
	#calendar-event-registering button {
		float: right;
	}
	
	#calendar-event-middle {
		display: flex;
		flex-direction: column;
		flex: 1;
	}
	
	#calendar-event-comp {
		min-width: 310px;
		padding-bottom: 0;
	}
	
	#calendar-event-comp .tabs {
		flex-shrink: 0;
		margin: 0px -15px;
		padding: 0px 8px 5px 8px;
		border-bottom: 2px solid #426585;
	}
	
	#calendar-event-comp button {
		margin: 0px 7px 5px 7px;
	}
	
	#calendar-event-comp .bottom {
		display: flex;
	}	
	
	#calendar-event-comp .inner {
		overflow: auto;
		width: 310px;
		margin-left: -15px;
		padding: 10px 15px 10px 15px;
	}
	
	#calendar-event-comp .row {
		flex: 1;
	}
	
	#calendar-event-comp .group {
		flex: 1;
	}
	
	#calendar-event .group + .group {
		margin-left: 15px;
	}
	
	#calendar-event-comp .group .label {
		text-align: center;
		margin-bottom: 5px;
		font-size: 12px;
		font-weight: 300;
	}
	
	#calendar-event-comp .raidbuffs {
		display: flex;
		flex-direction: column;
		padding: 15px 20px 15px 8px;
		border-right: 2px solid #395066;
	}
	
	#calendar-event-comp .raidbuffs img {
		width: 25px;
		margin-bottom: 6px;
		border: 1px solid rgba(0, 0, 0, 0.3);
		opacity: 0.5;
		transition: opacity ease .3s;
	}
	
	#calendar-event-comp .raidbuffs img.active {
		opacity: 0.9;
	}
	
	#calendar-event-comp .raidbuffs img:last-child {
		margin-right: 0;
	}
	
	#calendar-event-comp .note {
		padding: 15px;
		padding-right: 0px;
		flex: 1;
	}
</style>

<div id="calendar-event" class="tools-main">
	<div class="tiles" ng-include="'/views/calendar-menu.html'"></div>
	
	<div id="calendar-event-wrapper">
	
		<div id="calendar-event-left">
			<div class="box" id="calendar-event-infos">
				<button ng-click="eventMenu($event)" ng-if="eventEditable()"><i class="awe-cog"></i></button>
				<h3>{{ event.title }}</h3>
				<p style="margin-top: -5px" class="light">
					{{ event.date.split("-").reverse().join("/") }}
					&#8942;
					{{ eventTimeFormat() }}
					&#8942;
					{{ eventStateFormat() }}
					<!-- &#8942;
					{{ eventOwnerFormat() }} -->
				</p>
				<p ng-if="event.desc">{{ event.desc }}</p>
			</div>
			<div class="box" id="calendar-event-answers">
				<div>
					<button class="box-right"><i class="awe-plus-squared"></i> Invite</button>
					<h3>Answers</h3>
					<span></span>
				</div>
				
				<div class="tabs">
					<button ng-class="{ active: tab_selected == 1 }" ng-click="tab_selected = 1">
						<i class="awe-ok"></i>
						{{ answers[1].length || 0 }}
					</button>
					<button ng-class="{ active: tab_selected == 2 }" ng-click="tab_selected = 2">
						<i class="awe-cancel"></i>
						{{ answers[2].length || 0 }}
					</button>
					<button ng-class="{ active: tab_selected == 0 }" ng-click="tab_selected = 0">
						<i class="awe-clock"></i>
						{{ answers[0].length || 0 }}
					</button>
				</div>
				
				<div class="chars">
					<div class="row" ng-repeat="groups in getAnswersGroups(tab_selected)">
						<div class="char-wrapper" ng-repeat="answer in groups">
							<div ng-if="!answer.void" ng-tooltip=".tooltip">
								<div class="tooltip">
									<div class="fsblue">{{ answer.username | capitalize }}</div>
									<div class="light" ng-if="answer.date">{{ formatDate(answer.date) }}</div>
									<div class="light" ng-if="!answer.date">Non-register</div>
									<div class="spaced" ng-if="answer.note">
										{{ answer.note }}
									</div>
								</div>
								<div class="char" draggable="true">
									<img ng-src="/assets/role/{{ answer.main.role }}.png">
									<span class="name c{{ answer.main.class }}">{{ answer.main.name | capitalize }}</span>
									<i class="awe-pencil-squared" ng-if="answer.note"></i>
								</div>
							</div>
						</div>
					</div>
					<div class="box" style="width: 100%;" ng-if="!answers[tab_selected].length">
						It's empty!
					</div>
				</div>
			</div>
			<div class="box" id="calendar-event-registering" ng-if="event.state === 0">
				<h3>Status</h3>
				<div class="clearfix">
					<label class="opts">
						<input type="radio" ng-model="answer" value="1"> Available
					</label>
					<label class="opts">
						<input type="radio" ng-model="answer" value="2"> Unavailable
					</label>
				</div>
				<label ng-show="$.user.chars.length > 1">
					Character
					<select ng-model="answer_char" style="width: 100%;">
						<option class="c{{ char.class }}" ng-repeat="char in $.user.chars | filter : {active:1} : strict | orderBy : ['-main', 'name']" value="{{ char.id }}">
							{{ char.name }}
						</option>
					</select>
				</label>
				<label>
					Note
					<textarea ng-model="answer_note"></textarea>
				</label>
				<button ng-click="updateAnswer(answer, answer_note, answer_char)" ng-disabled="inflight">
					Save
				</button>
			</div>
			<script>
				_("#calendar-event-registering textarea").elastic();
			</script>
		</div>
		
		<div id="calendar-event-middle">
			<div class="box" id="calendar-event-comp">
				<button class="box-right"><i class="awe-plus"></i> New</button>
				<button class="box-right"><i class="awe-pencil"></i> Edit</button>
				<button class="box-right"><i class="awe-docs"></i> Import</button>
				<button class="box-right"><i class="awe-magic"></i> Autofill</button>
				<button class="box-right"><i class="awe-trash"></i> Delete</button>
				<h3>RaidComp</h3>
				<div class="tabs">
					<button ng-class="{ active: tab.title === active_tab }" ng-repeat="tab in tabs">{{ tab.title }}</button>
				</div>
				<div class="bottom">
					<div class="inner">
						<div class="row" ng-repeat="row in [1,3,5]">
							<div class="group" ng-repeat="offset in [0, 1]">
								<div class="label">Group {{ row + offset }}</div>
								<div class="char" ng-repeat="slot in [1,2,3,4,5]">
									<img ng-src="/assets/role/DPS.png">
									<span class="name c9">Lapinity</span>
								</div>
							</div>
						</div>
					</div>
					<div class="raidbuffs">
						<a rel="spell={{ raidbuffs.stats[0] }}&buff&domain=wod"><img ng-class="{ active: raidbuffs.stats[1] }" ng-src="{{ getBuffIcon('stats') }}"></a>
						<a rel="spell={{ raidbuffs.stamina[0] }}&buff&domain=wod"><img ng-class="{ active: raidbuffs.stamina[1] }" ng-src="{{ getBuffIcon('stamina') }}"></a>
						<a rel="spell={{ raidbuffs.ap[0] }}&buff&domain=wod"><img ng-class="{ active: raidbuffs.ap[1] }" ng-src="{{ getBuffIcon('ap') }}"></a>
						<a rel="spell={{ raidbuffs.sp[0] }}&buff&domain=wod"><img ng-class="{ active: raidbuffs.sp[1] }" ng-src="{{ getBuffIcon('sp') }}"></a>
						<a rel="spell={{ raidbuffs.crit[0] }}&buff&domain=wod"><img ng-class="{ active: raidbuffs.crit[1] }" ng-src="{{ getBuffIcon('crit') }}"></a>
						<a rel="spell={{ raidbuffs.haste[0] }}&buff&domain=wod"><img ng-class="{ active: raidbuffs.haste[1] }" ng-src="{{ getBuffIcon('haste') }}"></a>
						<a rel="spell={{ raidbuffs.mastery[0] }}&buff&domain=wod"><img ng-class="{ active: raidbuffs.mastery[1] }" ng-src="{{ getBuffIcon('mastery') }}"></a>
						<a rel="spell={{ raidbuffs.multistrike[0] }}&buff&domain=wod"><img ng-class="{ active: raidbuffs.multistrike[1] }" ng-src="{{ getBuffIcon('multistrike') }}"></a>
						<a rel="spell={{ raidbuffs.versatility[0] }}&buff&domain=wod"><img ng-class="{ active: raidbuffs.versatility[1] }" ng-src="{{ getBuffIcon('versatility') }}"></a>
					</div>
					<div class="note">
						<button class="box-right"><i class="awe-pencil"></i> Edit</button>
						<h3>Note</h3>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
