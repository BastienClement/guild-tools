"use strict";function StringView(e,t,n,r){var i,s,o,u,a,f,l=isFinite(n)?n:0,c=15;if(t){this.encoding=t.toString()}e:switch(this.encoding){case"UTF-8":u=StringView.putUTF8CharCode;a=StringView.getUTF8CharLength;i=Uint8Array;break e;case"UTF-16":u=StringView.putUTF16CharCode;a=StringView.getUTF16CharLength;i=Uint16Array;break e;case"UTF-32":i=Uint32Array;c&=14;break e;default:i=Uint8Array;c&=14}t:switch(typeof e){case"string":c&=7;break t;case"object":switch(e.constructor){case StringView:c&=3;break t;case String:c&=7;break t;case ArrayBuffer:s=new i(e);f=this.encoding==="UTF-32"?e.byteLength>>>2:this.encoding==="UTF-16"?e.byteLength>>>1:e.byteLength;o=l===0&&(!isFinite(r)||r===f)?s:new i(e,l,!isFinite(r)?f-l:r);break t;case Uint32Array:case Uint16Array:case Uint8Array:i=e.constructor;f=e.length;s=e.byteOffset===0&&e.length===(i===Uint32Array?e.buffer.byteLength>>>2:i===Uint16Array?e.buffer.byteLength>>>1:e.buffer.byteLength)?e:new i(e.buffer);o=l===0&&(!isFinite(r)||r===f)?e:e.subarray(l,isFinite(r)?l+r:f);break t;default:s=new i(e);f=s.length;o=l===0&&(!isFinite(r)||r===f)?s:s.subarray(l,isFinite(r)?l+r:f)}break t;default:s=o=new i(Number(e)||0)}if(c<8){var h,p,d,v,m,g,y;if(c&4){h=e;p=f=h.length;c^=this.encoding==="UTF-32"?0:2;l=d=n?Math.max((p+n)%p,0):0;m=v=(Number.isInteger(r)?Math.min(Math.max(r,0)+l,p):p)-1}else{h=e.rawData;f=e.makeIndex();l=d=n?Math.max((f+n)%f,0):0;p=Number.isInteger(r)?Math.min(Math.max(r,0),f-d):f;m=v=p+d;if(e.encoding==="UTF-8"){g=StringView.getUTF8CharLength;y=StringView.loadUTF8CharCode}else if(e.encoding==="UTF-16"){g=StringView.getUTF16CharLength;y=StringView.loadUTF16CharCode}else{c&=1}}if(p===0||c<4&&h.encoding===this.encoding&&d===0&&p===f){c=7}n:switch(c){case 0:s=new i(p);for(var b=0;b<p;s[b]=h[l+b++]);break n;case 1:p=0;for(var w=l;w<m;w++){p+=a(h[w])}s=new i(p);for(var w=l,b=0;b<p;w++){b=u(s,h[w],b)}break n;case 2:l=0;var E;for(S=0;S<d;S++){E=y(h,l);l+=g(E)}s=new i(p);for(var w=l,b=0;b<p;w+=g(E),b++){E=y(h,w);s[b]=E}break n;case 3:p=0;var E;for(var S=0,w=0;S<v;w+=g(E)){E=y(h,w);if(S===d){l=w}if(++S>d){p+=a(E)}}s=new i(p);for(var w=l,b=0;b<p;w+=g(E)){E=y(h,w);b=u(s,E,b)}break n;case 4:s=new i(p);for(var x=0;x<p;x++){s[x]=h.charCodeAt(x)&255}break n;case 5:p=0;for(var T=0;T<f;T++){if(T===d){l=p}p+=a(h.charCodeAt(T));if(T===v){m=p}}s=new i(p);for(var b=0,S=0;b<p;S++){b=u(s,h.charCodeAt(S),b)}break n;case 6:s=new i(p);for(var x=0;x<p;x++){s[x]=h.charCodeAt(x)}break n;case 7:s=new i(p?h:0);break n}o=c>3&&(l>0||m<s.length-1)?s.subarray(l,m):s}this.buffer=s.buffer;this.bufferView=s;this.rawData=o;Object.freeze(this)}if(!Number.isInteger){Number.isInteger=function(t){return typeof t==="number"&&isFinite(t)&&t>-9007199254740992&&t<9007199254740992&&Math.floor(t)===t}}StringView.loadUTF8CharCode=function(e,t){var n=e.length,r=e[t];return r>251&&r<254&&t+5<n?(r-252)*1073741824+(e[t+1]-128<<24)+(e[t+2]-128<<18)+(e[t+3]-128<<12)+(e[t+4]-128<<6)+e[t+5]-128:r>247&&r<252&&t+4<n?(r-248<<24)+(e[t+1]-128<<18)+(e[t+2]-128<<12)+(e[t+3]-128<<6)+e[t+4]-128:r>239&&r<248&&t+3<n?(r-240<<18)+(e[t+1]-128<<12)+(e[t+2]-128<<6)+e[t+3]-128:r>223&&r<240&&t+2<n?(r-224<<12)+(e[t+1]-128<<6)+e[t+2]-128:r>191&&r<224&&t+1<n?(r-192<<6)+e[t+1]-128:r};StringView.putUTF8CharCode=function(e,t,n){var r=n;if(t<128){e[r++]=t}else if(t<2048){e[r++]=192+(t>>>6);e[r++]=128+(t&63)}else if(t<65536){e[r++]=224+(t>>>12);e[r++]=128+(t>>>6&63);e[r++]=128+(t&63)}else if(t<2097152){e[r++]=240+(t>>>18);e[r++]=128+(t>>>12&63);e[r++]=128+(t>>>6&63);e[r++]=128+(t&63)}else if(t<67108864){e[r++]=248+(t>>>24);e[r++]=128+(t>>>18&63);e[r++]=128+(t>>>12&63);e[r++]=128+(t>>>6&63);e[r++]=128+(t&63)}else{e[r++]=252+t/1073741824;e[r++]=128+(t>>>24&63);e[r++]=128+(t>>>18&63);e[r++]=128+(t>>>12&63);e[r++]=128+(t>>>6&63);e[r++]=128+(t&63)}return r};StringView.getUTF8CharLength=function(e){return e<128?1:e<2048?2:e<65536?3:e<2097152?4:e<67108864?5:6};StringView.loadUTF16CharCode=function(e,t){var n=e[t];return n>55231&&t+1<e.length?(n-55296<<10)+e[t+1]+9216:n};StringView.putUTF16CharCode=function(e,t,n){var r=n;if(t<65536){e[r++]=t}else{e[r++]=55232+(t>>>10);e[r++]=56320+(t&1023)}return r};StringView.getUTF16CharLength=function(e){return e<65536?1:2};StringView.b64ToUint6=function(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:e===43?62:e===47?63:0};StringView.uint6ToB64=function(e){return e<26?e+65:e<52?e+71:e<62?e-4:e===62?43:e===63?47:65};StringView.bytesToBase64=function(e){var t="";for(var n,r=e.length,i=0,s=0;s<r;s++){n=s%3;if(s>0&&s*4/3%76===0){t+="\r\n"}i|=e[s]<<(16>>>n&24);if(n===2||e.length-s===1){t+=String.fromCharCode(StringView.uint6ToB64(i>>>18&63),StringView.uint6ToB64(i>>>12&63),StringView.uint6ToB64(i>>>6&63),StringView.uint6ToB64(i&63));i=0}}return t.replace(/A(?=A$|$)/g,"=")};StringView.base64ToBytes=function(e,t){var n=e.replace(/[^A-Za-z0-9\+\/]/g,""),r=n.length,i=t?Math.ceil((r*3+1>>>2)/t)*t:r*3+1>>>2,s=new Uint8Array(i);for(var o,u,a=0,f=0,l=0;l<r;l++){u=l&3;a|=StringView.b64ToUint6(n.charCodeAt(l))<<18-6*u;if(u===3||r-l===1){for(o=0;o<3&&f<i;o++,f++){s[f]=a>>>(16>>>o&24)&255}a=0}}return s};StringView.makeFromBase64=function(e,t,n,r){return new StringView(t==="UTF-16"||t==="UTF-32"?StringView.base64ToBytes(e,t==="UTF-16"?2:4).buffer:StringView.base64ToBytes(e),t,n,r)};StringView.prototype.encoding="UTF-8";StringView.prototype.makeIndex=function(e,t){var n=this.rawData,r,i=n.length,s=t||0,o=s,u=isNaN(e)?Infinity:e;if(e+1>n.length){throw new RangeError("StringView.prototype.makeIndex - The offset can't be major than the length of the array - 1.")}switch(this.encoding){case"UTF-8":var a;for(r=0;o<i&&r<u;r++){a=n[o];o+=a>251&&a<254&&o+5<i?6:a>247&&a<252&&o+4<i?5:a>239&&a<248&&o+3<i?4:a>223&&a<240&&o+2<i?3:a>191&&a<224&&o+1<i?2:1}break;case"UTF-16":for(r=s;o<i&&r<u;r++){o+=n[o]>55231&&o+1<n.length?2:1}break;default:o=r=isFinite(e)?e:i-1}if(e){return o}return r};StringView.prototype.toBase64=function(e){return StringView.bytesToBase64(e?this.bufferView.constructor===Uint8Array?this.bufferView:new Uint8Array(this.buffer):this.rawData.constructor===Uint8Array?this.rawData:new Uint8Array(this.buffer,this.rawData.byteOffset,this.rawData.length<<(this.rawData.constructor===Uint16Array?1:2)))};StringView.prototype.subview=function(e,t){var n,r,i,s=this.encoding==="UTF-8"||this.encoding==="UTF-16",o=e,u,a=this.rawData.length;if(a===0){return new StringView(this.buffer,this.encoding)}u=s?this.makeIndex():a;r=e?Math.max((u+e)%u,0):0;i=Number.isInteger(t)?Math.max(t,0)+r>u?u-r:t:u;if(r===0&&i===u){return this}if(s){o=this.makeIndex(r);n=this.makeIndex(i,o)-o}else{o=r;n=i-r}if(this.encoding==="UTF-16"){o<<=1}else if(this.encoding==="UTF-32"){o<<=2}return new StringView(this.buffer,this.encoding,o,n)};StringView.prototype.forEachChar=function(e,t,n,r){var i=this.rawData,s,o;if(this.encoding==="UTF-8"||this.encoding==="UTF-16"){var u,a;if(this.encoding==="UTF-8"){u=StringView.getUTF8CharLength;a=StringView.loadUTF8CharCode}else if(this.encoding==="UTF-16"){u=StringView.getUTF16CharLength;a=StringView.loadUTF16CharCode}o=isFinite(n)?this.makeIndex(n):0;s=isFinite(r)?this.makeIndex(r,o):i.length;for(var f,l=0;o<s;l++){f=a(i,o);e.call(t||null,f,l,o,i);o+=u(f)}}else{o=isFinite(n)?n:0;s=isFinite(r)?r+o:i.length;for(o;o<s;o++){e.call(t||null,i[o],o,o,i)}}};StringView.prototype.valueOf=StringView.prototype.toString=function(){if(this.encoding!=="UTF-8"&&this.encoding!=="UTF-16"){return String.fromCharCode.apply(null,this.rawData)}var e,t,n="";if(this.encoding==="UTF-8"){t=StringView.getUTF8CharLength;e=StringView.loadUTF8CharCode}else if(this.encoding==="UTF-16"){t=StringView.getUTF16CharLength;e=StringView.loadUTF16CharCode}for(var r,i=this.rawData.length,s=0;s<i;s+=t(r)){r=e(this.rawData,s);n+=String.fromCharCode(r)}return n}
