(function(u){function g(a,f,b){return f<=a&&a<=b}function p(a,f){return Math.floor(a/f)}function x(a){if(void 0===a)return{};if(a===Object(a))return a;throw TypeError("Could not convert argument to dictionary");}function B(a){this.tokens=[].slice.call(a)}function m(a,f){if(a)throw TypeError("Decoder error");return f||65533}function t(a){throw TypeError("The code point "+a+" could not be encoded.");}function D(a){a=String(a).trim().toLowerCase();return Object.prototype.hasOwnProperty.call(C,a)?C[a]:
null}function w(a,f){return f?f[a]||null:null}function v(a,f){var b=f.indexOf(a);return-1===b?null:b}function q(a){if(!("encoding-indexes"in u))throw Error("Indexes missing. Did you forget to include encoding-indexes.js?");return u["encoding-indexes"][a]}function y(a,f){if(!(this instanceof y))return new y(a,f);a=void 0!==a?String(a):"utf-8";f=x(f);this._encoding=D(a);if(null===this._encoding||"replacement"===this._encoding.name)throw RangeError("Unknown encoding: "+a);if(!n[this._encoding.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js?");
this._BOMseen=this._streaming=!1;this._decoder=null;this._fatal=Boolean(f.fatal);this._ignoreBOM=Boolean(f.ignoreBOM);Object.defineProperty?(Object.defineProperty(this,"encoding",{value:this._encoding.name}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})):(this.encoding=this._encoding.name,this.fatal=this._fatal,this.ignoreBOM=this._ignoreBOM);return this}function z(a,f){if(!(this instanceof z))return new z(a,f);a=void 0!==a?
String(a):"utf-8";f=x(f);this._encoding=D(a);if(null===this._encoding||"replacement"===this._encoding.name)throw RangeError("Unknown encoding: "+a);var b=Boolean(f.NONSTANDARD_allowLegacyEncoding),d="utf-8"!==this._encoding.name&&"utf-16le"!==this._encoding.name&&"utf-16be"!==this._encoding.name;if(null===this._encoding||d&&!b)throw RangeError("Unknown encoding: "+a);if(!r[this._encoding.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js?");this._streaming=!1;this._encoder=
null;this._options={fatal:Boolean(f.fatal)};Object.defineProperty?Object.defineProperty(this,"encoding",{value:this._encoding.name}):this.encoding=this._encoding.name;return this}function J(a){var f=a.fatal,b=0,d=0,c=0,l=128,e=191;this.handler=function(a,k){if(-1===k&&0!==c)return c=0,m(f);if(-1===k)return-1;if(0===c){if(g(k,0,127))return k;if(g(k,194,223))c=1,b=k-192;else if(g(k,224,239))224===k&&(l=160),237===k&&(e=159),c=2,b=k-224;else if(g(k,240,244))240===k&&(l=144),244===k&&(e=143),c=3,b=k-
240;else return m(f);b<<=6*c;return null}if(!g(k,l,e))return b=c=d=0,l=128,e=191,a.prepend(k),m(f);l=128;e=191;d+=1;b+=k-128<<6*(c-d);if(d!==c)return null;var q=b;b=c=d=0;return q}}function K(a){this.handler=function(a,b){if(-1===b)return-1;if(g(b,0,127))return b;var d,c;g(b,128,2047)?(d=1,c=192):g(b,2048,65535)?(d=2,c=224):g(b,65536,1114111)&&(d=3,c=240);for(c=[(b>>6*d)+c];0<d;)c.push(128|b>>6*(d-1)&63),--d;return c}}function L(a,f){var b=f.fatal;this.handler=function(d,c){if(-1===c)return-1;if(g(c,
0,127))return c;var f=a[c-128];return null===f?m(b):f}}function M(a,f){this.handler=function(b,d){if(-1===d)return-1;if(g(d,0,127))return d;var c=v(d,a);null===c&&t(d);return c+128}}function E(a){var f=a.fatal,b=0,d=0,c=0;this.handler=function(a,e){if(-1===e&&0===b&&0===d&&0===c)return-1;-1!==e||0===b&&0===d&&0===c||(c=d=b=0,m(f));var h;if(0!==c){h=null;if(g(e,48,57)){var k=10*(126*(10*(b-129)+(d-48))+(c-129))+e-48;if(39419<k&&189E3>k||1237575<k)h=null;else{var n=h=0,r=q("gb18030"),p;for(p=0;p<r.length;++p){var t=
r[p];if(t[0]<=k)h=t[0],n=t[1];else break}h=n+k-h}}k=[d,c,e];c=d=b=0;return null===h?(a.prepend(k),m(f)):h}if(0!==d){if(g(e,129,254))return c=e,null;a.prepend([d,e]);d=b=0;return m(f)}if(0!==b){if(g(e,48,57))return d=e,null;h=b;k=null;b=0;n=127>e?64:65;if(g(e,64,126)||g(e,128,254))k=190*(h-129)+(e-n);h=null===k?null:w(k,q("gb18030"));null===k&&a.prepend(e);return null===h?m(f):h}return g(e,0,127)?e:128===e?8364:g(e,129,254)?(b=e,null):m(f)}}function F(a,f){this.handler=function(b,a){if(-1===a)return-1;
if(g(a,0,127))return a;if(f&&8364===a)return 128;var c=v(a,q("gb18030"));if(null!==c){var l=p(c,190)+129,c=c%190;return[l,c+(63>c?64:65)]}if(f)return t(a);var l=c=0,e=q("gb18030"),h;for(h=0;h<e.length;++h){var k=e[h];if(k[1]<=a)c=k[1],l=k[0];else break}c=l+a-c;l=p(p(p(c,10),126),10);c-=12600*l;e=p(p(c,10),126);c-=1260*e;h=p(c,10);return[l+129,e+48,h+129,c-10*h+48]}}function N(a){var f=a.fatal,b=0;this.handler=function(a,c){if(-1===c&&0!==b)return b=0,m(f);if(-1===c&&0===b)return-1;if(0!==b){var l=
b,e=null;b=0;var h=127>c?64:98;if(g(c,64,126)||g(c,161,254))e=157*(l-129)+(c-h);switch(e){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}l=null===e?null:w(e,q("big5"));null===e&&a.prepend(c);return null===l?m(f):l}return g(c,0,127)?c:g(c,129,254)?(b=c,null):m(f)}}function O(a){this.handler=function(a,b){if(-1===b)return-1;if(g(b,0,127))return b;var d=v(b,q("big5"));if(null===d)return t(b);var c=p(d,157)+129;if(161>c)return t(b);d%=157;return[c,
d+(63>d?64:98)]}}function P(a){var f=a.fatal,b=!1,d=0;this.handler=function(a,l){if(-1===l&&0!==d)return d=0,m(f);if(-1===l&&0===d)return-1;if(142===d&&g(l,161,223))return d=0,65377+l-161;if(143===d&&g(l,161,254))return b=!0,d=l,null;if(0!==d){var e=d;d=0;var h=null;g(e,161,254)&&g(l,161,254)&&(h=w(94*(e-161)+(l-161),q(b?"jis0212":"jis0208")));b=!1;g(l,161,254)||a.prepend(l);return null===h?m(f):h}return g(l,0,127)?l:142===l||143===l||g(l,161,254)?(d=l,null):m(f)}}function Q(a){this.handler=function(a,
b){if(-1===b)return-1;if(g(b,0,127))return b;if(165===b)return 92;if(8254===b)return 126;if(g(b,65377,65439))return[142,b-65377+161];var d=v(b,q("jis0208"));return null===d?t(b):[p(d,94)+161,d%94+161]}}function R(a){var f=a.fatal,b=0,d=0,c=!1;this.handler=function(a,e){switch(b){default:case 0:if(27===e)return b=5,null;if(g(e,0,127)&&14!==e&&15!==e&&27!==e)return c=!1,e;if(-1===e)return-1;c=!1;return m(f);case 1:if(27===e)return b=5,null;if(92===e)return c=!1,165;if(126===e)return c=!1,8254;if(g(e,
0,127)&&14!==e&&15!==e&&27!==e&&92!==e&&126!==e)return c=!1,e;if(-1===e)return-1;c=!1;return m(f);case 2:if(27===e)return b=5,null;if(g(e,33,95))return c=!1,65377+e-33;if(-1===e)return-1;c=!1;return m(f);case 3:if(27===e)return b=5,null;if(g(e,33,126))return c=!1,d=e,b=4,null;if(-1===e)return-1;c=!1;return m(f);case 4:if(27===e)return b=5,m(f);if(g(e,33,126)){b=3;var h=w(94*(d-33)+e-33,q("jis0208"));return null===h?m(f):h}if(-1===e)return b=3,a.prepend(e),m(f);b=3;return m(f);case 5:if(36===e||40===
e)return d=e,b=6,null;a.prepend(e);c=!1;b=0;return m(f);case 6:h=d;d=0;var k=null;40===h&&66===e&&(k=0);40===h&&74===e&&(k=1);40===h&&73===e&&(k=2);36!==h||64!==e&&66!==e||(k=3);if(null!==k)return b=b=k,h=c,c=!0,h?m(f):null;a.prepend([h,e]);c=!1;b=0;return m(f)}}}function S(a){var f=0;this.handler=function(a,d){if(-1===d&&0!==f)return a.prepend(d),[27,40,66];if(-1===d&&0===f)return-1;if(0===f&&g(d,0,127))return d;if(1===f&&g(d,0,127)&&92!==d&&126!==d){if(g(d,0,127))return d;if(165===d)return 92;if(8254===
d)return 126}if(g(d,0,127)&&0!==f)return a.prepend(d),f=0,[27,40,66];if((165===d||8254===d)&&1!==f)return a.prepend(d),f=1,[27,40,74];var c=v(d,q("jis0208"));return null===c?t(d):2!==f?(a.prepend(d),f=2,[27,36,66]):[p(c,94)+33,c%94+33]}}function T(a){var f=a.fatal,b=0;this.handler=function(a,c){if(-1===c&&0!==b)return b=0,m(f);if(-1===c&&0===b)return-1;if(0!==b){var l=b,e=null;b=0;var h=127>c?64:65,k=160>l?129:193;if(g(c,64,126)||g(c,128,252))e=188*(l-k)+c-h;l=null===e?null:w(e,q("jis0208"));if(null===
l&&null!==e&&g(e,8836,10528))return 57344+e-8836;null===e&&a.prepend(c);return null===l?m(f):l}return g(c,0,128)?c:g(c,161,223)?65377+c-161:g(c,129,159)||g(c,224,252)?(b=c,null):m(f)}}function U(a){this.handler=function(a,b){if(-1===b)return-1;if(g(b,0,128))return b;if(165===b)return 92;if(8254===b)return 126;if(g(b,65377,65439))return b-65377+161;var d;var c=v(b,q("jis0208"));d=null===c||g(c,8272,8835)?null:c;if(null===d)return t(b);c=p(d,188);d%=188;return[c+(31>c?129:193),d+(63>d?64:65)]}}function V(a){var f=
a.fatal,b=0;this.handler=function(a,c){if(-1===c&&0!==b)return b=0,m(f);if(-1===c&&0===b)return-1;if(0!==b){var l=b,e=null;b=0;g(c,65,254)&&(e=190*(l-129)+(c-65));l=null===e?null:w(e,q("euc-kr"));null===e&&g(c,0,127)&&a.prepend(c);return null===l?m(f):l}return g(c,0,127)?c:g(c,129,254)?(b=c,null):m(f)}}function W(a){this.handler=function(a,b){if(-1===b)return-1;if(g(b,0,127))return b;var d=v(b,q("euc-kr"));return null===d?t(b):[p(d,190)+129,d%190+65]}}function A(a,f){var b=a>>8,d=a&255;return f?[b,
d]:[d,b]}function G(a,f){var b=f.fatal,d=null,c=null;this.handler=function(f,e){if(-1===e&&(null!==d||null!==c))return m(b);if(-1===e&&null===d&&null===c)return-1;if(null===d)return d=e,null;var h;h=a?(d<<8)+e:(e<<8)+d;d=null;if(null!==c){var k=c;c=null;if(g(h,56320,57343))return 65536+1024*(k-55296)+(h-56320);f.prepend(A(h,a));return m(b)}return g(h,55296,56319)?(c=h,null):g(h,56320,57343)?m(b):h}}function H(a,f){this.handler=function(b,d){if(-1===d)return-1;if(g(d,0,65535))return A(d,a);var c=A((d-
65536>>10)+55296,a),f=A((d-65536&1023)+56320,a);return c.concat(f)}}function X(a){this.handler=function(a,b){return-1===b?-1:g(b,0,127)?b:63360+b-128}}function Y(a){this.handler=function(a,b){return-1===b?-1:g(b,0,127)?b:g(b,63360,63487)?b-63360+128:t(b)}}B.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(a){if(Array.isArray(a))for(;a.length;)this.tokens.unshift(a.pop());else this.tokens.unshift(a)},push:function(a){if(Array.isArray(a))for(;a.length;)this.tokens.push(a.shift());
else this.tokens.push(a)}};var I=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"utf-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"ibm866"},{labels:"csisolatin2 iso-8859-2 iso-ir-101 iso8859-2 iso88592 iso_8859-2 iso_8859-2:1987 l2 latin2".split(" "),name:"iso-8859-2"},{labels:"csisolatin3 iso-8859-3 iso-ir-109 iso8859-3 iso88593 iso_8859-3 iso_8859-3:1988 l3 latin3".split(" "),name:"iso-8859-3"},{labels:"csisolatin4 iso-8859-4 iso-ir-110 iso8859-4 iso88594 iso_8859-4 iso_8859-4:1988 l4 latin4".split(" "),
name:"iso-8859-4"},{labels:"csisolatincyrillic cyrillic iso-8859-5 iso-ir-144 iso8859-5 iso88595 iso_8859-5 iso_8859-5:1988".split(" "),name:"iso-8859-5"},{labels:"arabic asmo-708 csiso88596e csiso88596i csisolatinarabic ecma-114 iso-8859-6 iso-8859-6-e iso-8859-6-i iso-ir-127 iso8859-6 iso88596 iso_8859-6 iso_8859-6:1987".split(" "),name:"iso-8859-6"},{labels:"csisolatingreek ecma-118 elot_928 greek greek8 iso-8859-7 iso-ir-126 iso8859-7 iso88597 iso_8859-7 iso_8859-7:1987 sun_eu_greek".split(" "),
name:"iso-8859-7"},{labels:"csiso88598e csisolatinhebrew hebrew iso-8859-8 iso-8859-8-e iso-ir-138 iso8859-8 iso88598 iso_8859-8 iso_8859-8:1988 visual".split(" "),name:"iso-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"iso-8859-8-i"},{labels:"csisolatin6 iso-8859-10 iso-ir-157 iso8859-10 iso885910 l6 latin6".split(" "),name:"iso-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"iso-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"iso-8859-14"},{labels:"csisolatin9 iso-8859-15 iso8859-15 iso885915 iso_8859-15 l9".split(" "),
name:"iso-8859-15"},{labels:["iso-8859-16"],name:"iso-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"koi8-r"},{labels:["koi8-u"],name:"koi8-u"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:"dos-874 iso-8859-11 iso8859-11 iso885911 tis-620 windows-874".split(" "),name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:"ansi_x3.4-1968 ascii cp1252 cp819 csisolatin1 ibm819 iso-8859-1 iso-ir-100 iso8859-1 iso88591 iso_8859-1 iso_8859-1:1987 l1 latin1 us-ascii windows-1252 x-cp1252".split(" "),
name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:"cp1254 csisolatin5 iso-8859-9 iso-ir-148 iso8859-9 iso88599 iso_8859-9 iso_8859-9:1989 l5 latin5 windows-1254 x-cp1254".split(" "),name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},
{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:"chinese csgb2312 csiso58gb231280 gb2312 gb_2312 gb_2312-80 gbk iso-ir-58 x-gbk".split(" "),name:"gbk"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese",
"euc-jp","x-euc-jp"],name:"euc-jp"},{labels:["csiso2022jp","iso-2022-jp"],name:"iso-2022-jp"},{labels:"csshiftjis ms_kanji shift-jis shift_jis sjis windows-31j x-sjis".split(" "),name:"shift_jis"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:"cseuckr csksc56011987 euc-kr iso-ir-149 korean ks_c_5601-1987 ks_c_5601-1989 ksc5601 ksc_5601 windows-949".split(" "),name:"euc-kr"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn",
"iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"utf-16be"},{labels:["utf-16","utf-16le"],name:"utf-16le"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],C={};I.forEach(function(a){a.encodings.forEach(function(a){a.labels.forEach(function(b){C[b]=a})})});var r={},n={};y.prototype={decode:function(a,f){var b;b="object"===typeof a&&a instanceof ArrayBuffer?new Uint8Array(a):"object"===typeof a&&"buffer"in a&&a.buffer instanceof
ArrayBuffer?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(0);f=x(f);this._streaming||(this._decoder=n[this._encoding.name]({fatal:this._fatal}),this._BOMseen=!1);this._streaming=Boolean(f.stream);var d=new B(b);b=[];for(var c;!d.endOfStream();){c=this._decoder.handler(d,d.read());if(-1===c)break;null!==c&&(Array.isArray(c)?b.push.apply(b,c):b.push(c))}if(!this._streaming){do{c=this._decoder.handler(d,d.read());if(-1===c)break;null!==c&&(Array.isArray(c)?b.push.apply(b,c):b.push(c))}while(!d.endOfStream());
this._decoder=null}!b.length||-1===["utf-8","utf-16le","utf-16be"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===b[0]?(this._BOMseen=!0,b.shift()):this._BOMseen=!0);d="";for(c=0;c<b.length;++c){var g=b[c];65535>=g?d+=String.fromCharCode(g):(g-=65536,d+=String.fromCharCode((g>>10)+55296,(g&1023)+56320))}return d}};z.prototype={encode:function(a,f){a=a?String(a):"";f=x(f);this._streaming||(this._encoder=r[this._encoding.name](this._options));this._streaming=Boolean(f.stream);for(var b=
[],d=a,c=String(d),g=c.length,e=0,h=[];e<g;){var k=c.charCodeAt(e);if(55296>k||57343<k)h.push(k);else if(56320<=k&&57343>=k)h.push(65533);else if(55296<=k&&56319>=k)if(e===g-1)h.push(65533);else{var m=d.charCodeAt(e+1);56320<=m&&57343>=m?(h.push(65536+((k&1023)<<10)+(m&1023)),e+=1):h.push(65533)}e+=1}for(d=new B(h);!d.endOfStream();){c=this._encoder.handler(d,d.read());if(-1===c)break;Array.isArray(c)?b.push.apply(b,c):b.push(c)}if(!this._streaming){for(;;){c=this._encoder.handler(d,d.read());if(-1===
c)break;Array.isArray(c)?b.push.apply(b,c):b.push(c)}this._encoder=null}return new Uint8Array(b)}};r["utf-8"]=function(a){return new K(a)};n["utf-8"]=function(a){return new J(a)};(function(){"encoding-indexes"in u&&I.forEach(function(a){"Legacy single-byte encodings"===a.heading&&a.encodings.forEach(function(a){a=a.name;var b=q(a);n[a]=function(a){return new L(b,a)};r[a]=function(a){return new M(b,a)}})})})();n.gbk=function(a){return new E(a)};r.gbk=function(a){return new F(a,!0)};r.gb18030=function(a){return new F(a)};
n.gb18030=function(a){return new E(a)};r.big5=function(a){return new O(a)};n.big5=function(a){return new N(a)};r["euc-jp"]=function(a){return new Q(a)};n["euc-jp"]=function(a){return new P(a)};r["iso-2022-jp"]=function(a){return new S(a)};n["iso-2022-jp"]=function(a){return new R(a)};r.shift_jis=function(a){return new U(a)};n.shift_jis=function(a){return new T(a)};r["euc-kr"]=function(a){return new W(a)};n["euc-kr"]=function(a){return new V(a)};r["utf-16be"]=function(a){return new H(!0,a)};n["utf-16be"]=
function(a){return new G(!0,a)};r["utf-16le"]=function(a){return new H(!1,a)};n["utf-16le"]=function(a){return new G(!1,a)};r["x-user-defined"]=function(a){return new Y(a)};n["x-user-defined"]=function(a){return new X(a)};"TextEncoder"in u||(u.TextEncoder=z);"TextDecoder"in u||(u.TextDecoder=y)})(this);
